import{u as g,I as _,o as l,c as i,d as t,g as T,J as d,P as p,r as k,A as K,K as B,D as U,f as r,M as v,O as J,$ as P,h as L,e as N,B as f,N as y,Q as m}from"./vendor.c38d77ce.js";import{d as h}from"./index.5622d2a1.js";const D={class:"modal fade",id:"buatTokenPemilihanModal","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},M={class:"modal-dialog"},S=["onSubmit"],V={class:"modal-content"},j=t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"staticBackdropLabel"}," Buat Token Pemilihan "),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),A={class:"modal-body"},w=t("h5",null,"Jumlah Peserta Penuh",-1),x={class:"mb-3"},O=t("label",{for:"tokenPC",class:"form-label d-none"}," Jumlah Peserta Penuh Pimpinan Cabang ",-1),q={class:"mb-3"},E=t("label",{for:"komisariatCalonKetuaUmum",class:"form-label d-none"}," Jumlah Peserta Penuh Pimpinan Komisariat ",-1),F=t("div",{class:"modal-footer"},[t("button",{type:"submit",class:"btn btn-primary"},"Buat")],-1),H={setup($){const u=g(),s=_(0),n=_(0),c=()=>{u.commit("createToken",[s.value,n.value])};return(b,e)=>(l(),i("div",D,[t("div",M,[t("form",{onSubmit:T(c,["prevent"])},[t("div",V,[j,t("div",A,[w,t("div",x,[O,d(t("input",{type:"number",min:"1",class:"form-control",id:"namaCalonKetuaUmum",placeholder:"Jumlah Peserta Penuh Pimpinan Cabang",required:"","onUpdate:modelValue":e[0]||(e[0]=a=>s.value=a)},null,512),[[p,s.value]])]),t("div",q,[E,d(t("input",{type:"number",min:"1",class:"form-control",id:"komisariatCalonKetuaUmum",placeholder:"Jumlah Peserta Penuh Pimpinan Komisariat",required:"","onUpdate:modelValue":e[1]||(e[1]=a=>n.value=a)},null,512),[[p,n.value]])])]),F])],40,S)])]))}},I=t("h1",null,"Token Pemilihan",-1),Q=t("button",{class:"btn btn-primary btn-sm mb-2 me-2",type:"button","data-bs-toggle":"modal","data-bs-target":"#buatTokenPemilihanModal"}," Buat Token ",-1),z={class:"table-box"},G={class:"in-admin"},R=t("thead",null,[t("tr",null,[t("th",null,"No"),t("th",null,"Token"),t("th",null,"Pemilik")])],-1),W={key:0},X=t("td",{colspan:"3"},"Data tidak ditemukan",-1),Y=[X],at={setup($){const u=g(),s=k(u.state.tokenList),n=k({});K(B(U(h,"komisariat")),e=>{e.forEach(a=>{n[Object.keys(a.data())]=Object.values(a.data())[0]})});const c=e=>{const a=e.slice(4,6);return n[a]==null?"pimpinan cabang":"PK. "+n[a]},b=()=>{const e={token:Array()};f(y(h,"token","token"),e).then(()=>{alert("Token berhasil dihapus")}).catch(o=>{alert("Token gagal dihapus")});const a={lastUsedToken:Array()};f(y(h,"token","used"),a).then(()=>{}).catch(o=>{})};return(e,a)=>(l(),i(v,null,[t("div",null,[I,Q,t("button",{class:"btn btn-danger btn-sm mb-2",type:"button",onClick:a[0]||(a[0]=T(o=>b(),["prevent"]))}," Hapus Token "),t("div",z,[t("table",G,[R,r(s)[0]?(l(),i("tbody",W,[(l(!0),i(v,null,J(r(s)[0],(o,C)=>d((l(),i("tr",{key:o},[t("td",null,m(C+1),1),t("td",null,m(o.slice(2,4)+o.slice(6)),1),t("td",null,m(c(o)),1)])),[[P,r(s)[0].length>=0]])),128)),d(t("tr",null,Y,512),[[P,r(s)[0].length<=0]])])):L("",!0)])])]),N(H)],64))}};export{at as default};
